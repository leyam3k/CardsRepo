# 11. UI/UX Notes & Changelog

This document tracks feedback, notes, and changes related to the User Interface (UI) and User Experience (UX) of the Cards Repo project.

---

### Initial Setup & Core MVP (Phase 1)

**Key Changes & Learnings:**

*   **Monorepo Setup:** Established `pnpm` workspace with `packages/client` (React/Vite/TS) and `packages/server` (Node.js/Express/TS).

*   **Server API:** Implemented basic CRUD (Create, Read) for cards and image serving. Encountered and resolved `crc-32` and `multer` type declaration issues.

*   **Client UI:** Configured Tailwind CSS, integrated Zustand for state management, and created `UploadCard`, `CardGallery`, and `CardDetails` components with `react-router-dom` for navigation.

*   **Development Notes:** Identified and corrected issues with `pnpm create vite` directory nesting and `npx`/`pnpm dlx` executable paths, leading to manual file creation for Tailwind config. Updated `RulesAndMemory.md` for clearer command execution instructions.

---

### Phase 1 Testing & Debugging

**UI/UX Feedback & Observations:**
*   **Initial UI State:** The UI is functional but visually basic, which is expected for the MVP. The core layout for card upload, gallery, and details is in place, but lacks styling.
*   **Developer Experience (DX):** The initial server startup script (`tsc --watch & node ...`) was ambiguous and suppressed critical "server running" messages. This led to a "Failed to fetch" error on the client, creating a poor debugging experience. The process was revised to a more reliable `build` then `start` sequence.

**Technical Changes & Fixes:**
*   **PostCSS Configuration:** Corrected a PostCSS configuration issue by installing `@tailwindcss/postcss` and updating `postcss.config.js` to fix a build error that prevented the UI from rendering.

---

### Phase 2: Core Features â€“ Organization & Interaction

**Key Changes & Learnings:**

*   **Card Management (CRUD):** Implemented `PUT` and `DELETE` endpoints on the backend for card updates and deletions.
    *   **UI/UX:** Added "Edit" and "Delete" buttons to `CardDetails` page. Introduced a `FullScreenTextEditor` component for improved long-text editing (e.g., description, character details), enhancing UX for content-heavy fields.
*   **Tagging System:**
    *   **Backend:** Updated card model to include `tags` array and implemented `GET /api/tags` endpoint to fetch all unique tags.
    *   **UI/UX:** Developed a `TagInput` component for adding/editing tags on `CardDetails` (edit form) and displaying them on both `CardDetails` and `CardGallery` pages, improving card organization and visual information.
*   **Search & Filtering (V1):**
    *   **Backend:** Enhanced `GET /api/cards` to support `q` (search query for name, description, creator) and `tags` (multi-tag filtering).
    *   **UI/UX:** Added search bar and tag filter to `CardGallery` for efficient card discovery, significantly enhancing usability for large collections. Implemented debouncing for search input.
*   **User Experience (UI/UX):** Implemented a Light/Dark mode toggle with persistence via `localStorage`, providing personalization options and improving visual comfort. Configured Tailwind CSS for class-based dark mode.

---

### Client Build & Development Environment Fixes

**Technical Changes & Fixes:**
*   **TypeScript Build Errors Resolution:** Addressed and resolved multiple `TS6133: '...' is declared but its value is never read` and `TS6196: '...' is declared but never used` errors in the client-side codebase.
    *   Removed unused `React` import in `packages/client/src/App.tsx`.
    *   Removed unused `handleClose` function in `packages/client/src/components/FullScreenTextEditor.tsx`.
    *   Refactored `Card` interface usage in `packages/client/src/pages/CardGallery.tsx` by exporting it from `packages/client/src/store/cardStore.ts` and importing it as a type, and explicitly typing the `cards` array.
    *   **Developer Experience (DX) Impact:** These fixes significantly improve the client build process stability, ensuring a smoother development workflow and enabling reliable compilation for future deployments.

---

### Phase 2 Debug Session - Part 2

**UI/UX Feedback & Observations:**
*   **Editable Fields:** Initial feedback indicated that 'Description', 'Character', and 'Scenario' fields were not clearly editable. This was addressed by making the "Edit" button within the `FullScreenTextEditor` component (`packages/client/src/components/FullScreenTextEditor.tsx`) always visible, improving the discoverability of the editing functionality.
*   **General UI/UX:** User feedback noted the UI as "very basic and non user friendly," and "plain." This aligns with the project roadmap's phased approach, where core functionality is prioritized in early phases, and significant UI/UX improvements are planned for later stages (Phase 3 & 4).

**Technical Changes & Fixes:**
*   **Creator Field Display:** Resolved an issue where the 'Creator' field was not displaying correctly for some cards, especially after re-upload. The problem stemmed from the server's `POST /api/cards/upload` endpoint (`packages/server/src/index.ts`) where a top-level empty `creator` field in the raw character data from the PNG was unintentionally overwriting the correct `creator` value nested within a `data` object. The fix ensures the `creator` is correctly extracted and prioritized at the top level of the saved card JSON.
*   **Tag Input Parsing:** Fixed the `TagInput` component (`packages/client/src/components/TagInput.tsx`) to correctly parse multiple tags when entered as a comma-separated string, resolving the issue where `("Sci-Fi", "Anime")` was treated as a single tag.

---

### Phase 2 Debug Session - Part 3

**UI/UX Feedback & Observations:**
*   A critical build error related to PostCSS and Tailwind CSS prevented the client application's UI from rendering, impacting overall developer experience (DX) and preventing any UI interaction.

**Technical Changes & Fixes:**
*   **PostCSS Configuration Update:** Corrected the `postcss.config.js` in `packages/client` by changing `tailwindcss: {}` to `'@tailwindcss/postcss': {}`. This aligns the configuration with the updated Tailwind CSS PostCSS plugin, resolving the build failure and enabling the client UI to compile.