# 7. Individual Phases Breakdown
This document provides a detailed, step-by-step elaboration of the four development phases outlined in the Project Roadmap.
________________________________________
Phase 1: Foundation & MVP – The Core Archive
Goal: To establish the project's technical foundation and deliver the essential functionality for importing and viewing cards.
Detailed Steps:
1.	Project Scaffolding (Monorepo Setup):
o	Create the root CardsRepo directory.
o	Initialize a pnpm workspace to manage the monorepo.
o	Create two main packages:
	packages/client: For the React frontend application.
	packages/server: For the Node.js/Express backend.
2.	Server Development (Backend API V1 with New Architecture):
o	Initialize a new Node.js project with TypeScript in packages/server.
o	Install dependencies: express, cors, multer (for file uploads), and dev dependencies like @types/express.
o	Set up a basic Express server that listens on a configurable port and enables CORS.
o	**New: Data Storage:** Create a `data` directory in the server package. All card data will be stored here.
o	API Endpoints:
	**New: POST /api/cards/upload:**
	Accepts a .png file upload.
	Uses the migrated png.ts logic to extract character data and the avatar.
	**Creates a new, uniquely identified folder inside `data/cards/`.**
	Saves the character data as `card.json` inside the new folder.
	Saves the avatar as `avatar.png` inside the new folder.
	**New: GET /api/cards:**
	**Scans the `data/cards/` directory.**
	Reads the `card.json` from each individual card folder.
	Returns an array of all card data for the main gallery view.
	**New: GET /api/cards/:id:**
	Retrieves the data for a single card by reading `data/cards/:id/card.json`.
	**New: GET /api/cards/:id/image:**
	Serves the static `avatar.png` file from `data/cards/:id/`.
3.	Client Development (Frontend UI):
o	Initialize a new React project using Vite and TypeScript in packages/client.
o	Install dependencies: react-router-dom, zustand, tailwindcss.
o	Configure Tailwind CSS for utility-first styling.
o	Logic Migration: Adapt and migrate the core PNG parsing logic from CCEditor/src/tools/png.ts into a client-side utility module (src/lib/card-parser.ts).
o	State Management: Set up a simple global store with Zustand to handle the list of cards and UI state (e.g., loading status).
o	Component Development:
	UploadCard: A component to POST a card to the `/api/cards/upload` endpoint.
	CardGallery: The main page. Fetches all cards from `/api/cards` and displays them in a responsive grid.
	CardDetails: A **read-only** page to display the full details of a selected card, fetched from `/api/cards/:id`.
o	Routing: Implement react-router-dom to navigate between the CardGallery (/) and CardDetails (/card/:id) pages.
________________________________________
Phase 2: Core Features – Organization & Interaction
Goal: To build upon the MVP by adding the fundamental tools for organizing, editing, and filtering the card collection, with a focus on a CCEditor-style experience.
Detailed Steps:
1.	**New: Card Management (Major UI/UX Overhaul):**
o	**Backend:**
	`PUT /api/cards/:id`: Create an endpoint to update a card. It will find the corresponding `card.json` file and overwrite it with the new data from the request body. **It will also update the `lastModified` timestamp.**
	`DELETE /api/cards/:id`: Create an endpoint to delete a card. It will remove the card's entire folder (`/data/cards/:id`).
o	**Frontend (CardDetails Page Rearchitecture):**
	Overhaul the page into a two-column layout.
	**Left Column:**
	Display the card's avatar (`avatar.png`).
	Display the initial PNG filename, image dimensions, and detected Spec Version.
	Add action buttons: `Edit`, `Download PNG`, `Download JSON`, and `Delete Card`.
	**Right Column (Tabbed Interface):**
	**"Basic Info" Tab:** Implement editable fields for Name, Nickname, Creator, Character Version, Tags, and Description.
	**"Details" Tab:** Implement editable fields for Personality, Scenario, First Message, Message Example, Alternate Greetings, System Prompt, Post History Instructions, and Creator Notes.
2.	**New: Date Tracking:**
o	**Backend:** When creating a card, automatically add an `importDate` field to the `card.json`. When updating, update the `lastModified` field.
o	**Frontend:** Display these dates clearly in the CardDetails UI.
3.	Tagging System:
o	Backend:
	Update the `card.json` model to include a `tags: string[]` array.
	Create a `GET /api/tags` endpoint that scans all card files, aggregates a list of all unique tags, and returns it.
o	Frontend:
	In the "Basic Info" tab, add a tag input component.
4.	Search & Filtering (V1):
o	Backend:
	Enhance the `GET /api/cards` endpoint to accept query parameters: `q` (for search) and `tags`.
o	Frontend:
	Add a search bar and tag filter UI to the `CardGallery`.
5.	User Experience:
o	Implement a light/dark mode toggle.
________________________________________
Phase 3: Advanced Management – Power & Efficiency
Goal: To introduce "power-user" features like versioning, archival, and advanced editing tools.
Detailed Steps:
1.	**New: Archival & Versioning System:**
o	**Backend:**
	Implement a `DELETE /api/cards/:id/archive` endpoint that moves the entire card folder from `data/cards/` to a new `data/archive/` directory.
	Modify the `PUT /api/cards/:id` logic: Before saving changes, it must first copy the existing `card.json` into a `versions` sub-folder (e.g., `data/cards/:id/versions/<timestamp>.json`).
o	**Frontend:**
	On the `CardDetails` page, add a **"Version History" Tab**.
	This tab will list all historical versions, allowing a user to **Preview** (view read-only) and **Revert** to a previous version. Reverting will first save the current state as a new version.
2.	**New: Advanced Card Details & Tools:**
o	**Frontend:** Implement the remaining CCEditor tabs on the `CardDetails` page:
	**"Character Book" Tab:** UI for viewing and managing lorebook entries.
	**"Advanced" Tab:** A read-only view for the raw JSON data (Assets, Extensions, etc.).
	**"Tool" Tab:** UI for managing and using custom text templates.
3.	**New: Enhanced Deletion Logic:**
o	**Frontend:**
	Update the `Delete Card` confirmation. If version history exists, the dialog should warn the user.
	The `Delete Card + Archive` button (which triggers the archive endpoint) will require a second, explicit confirmation.
4.	Advanced Filtering:
o	Backend: Further enhance `GET /api/cards` for more filters (e.g., `hasLorebook`, `isFavorite`, `rating`).
o	Frontend: Add a dedicated "Filters" panel to the `CardGallery`.
5.	Favorites System & Bulk Actions:
o	Implement the backend and frontend for the favorites system and bulk actions (select multiple, apply tags, etc.).
________________________________________
Phase 4: Personalization, Data Integrity & Deployment
Goal: To add final touches, ensure data longevity, and implement basic security.
Detailed Steps:
1.	**New: UI & UX Polish:**
o	**Char & Token Count:** On the frontend, implement live character and token counts for relevant text fields in the `CardDetails` edit forms.
o	**Card Galleries:**
	**Backend:** Create endpoints to handle uploading additional images to a `gallery` sub-folder within a card's directory (`data/cards/:id/gallery/`).
	**Frontend:** Add a UI for uploading and viewing these galleries.
2.	Data Integrity:
o	**Backup & Restore (Backend):**
	`GET /api/admin/backup`: Creates a .zip archive of the entire `data` directory.
	`POST /api/admin/restore`: Wipes the current `data` directory and extracts a backup zip.
o	**Frontend:** Create a "Settings" page with buttons for backup and restore.
3.	Personalization:
o	**User Notes & Star Ratings:** Add fields for these to the `card.json` model and implement the corresponding UI on the `CardDetails` page.
4.	Security (Single-User):
o	Implement JWT-based password protection for the API.
o	Create a Login page on the client.
5.	Deployment Documentation:
o	Update the root `README.md` with clear, step-by-step instructions.