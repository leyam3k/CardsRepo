# 10. Cards Repo - Development TODO

This file tracks the development progress based on the established roadmap.

## Phase 1: Foundation & MVP – The Core Archive
- [x] **Project Scaffolding (Monorepo Setup)**
  - [x] Create the root `CardsRepo` directory.
  - [x] Initialize a `pnpm` workspace.
  - [x] Create `packages/client` for the React frontend.
  - [x] Create `packages/server` for the Node.js/Express backend.
- [ ] **Server Development (Backend API V1 with New Architecture)**
  - [ ] Initialize Node.js/TypeScript project in `packages/server`.
  - [ ] Setup basic Express server with CORS.
  - [ ] **New:** Create `data/cards` directory for folder-per-card storage.
  - [ ] **New:** Implement `POST /api/cards/upload` to save card data and avatar to a new dedicated folder.
  - [ ] **New:** Implement `GET /api/cards` to read from all card folders.
  - [ ] **New:** Implement `GET /api/cards/:id` to read a specific card's `card.json`.
  - [ ] **New:** Implement `GET /api/cards/:id/image` to serve the `avatar.png` from its folder.
- [ ] **Client Development (Frontend UI)**
  - [ ] Initialize React/Vite/TypeScript project in `packages/client`.
  - [ ] Configure Tailwind CSS.
  - [ ] Migrate `png.ts` logic to `src/lib/card-parser.ts`.
  - [ ] Set up Zustand for state management.
  - [ ] Create `UploadCard` component.
  - [ ] Create `CardGallery` component/page.
  - [ ] Create a **read-only** `CardDetails` component/page.
  - [ ] Implement routing between gallery and details pages.

## Phase 2: Core Features – Organization & Interaction
- [ ] **Card Management (Major UI/UX Overhaul)**
  - [ ] **Backend:** Implement `PUT /api/cards/:id` endpoint for updates.
  - [ ] **Backend:** Implement `DELETE /api/cards/:id` endpoint for simple deletion.
  - [ ] **Frontend (Left Column):** Display avatar, filename, image dimensions, and spec version.
  - [ ] **Frontend (Left Column):** Add `Edit`, `Download PNG`, `Download JSON`, and `Delete Card` buttons.
  - [ ] **Frontend (Right Column):** Implement "Basic Info" tab with all fields.
  - [ ] **Frontend (Right Column):** Implement "Details" tab with all fields.
- [ ] **Date Tracking**
  - [ ] **Backend:** Add `importDate` and `lastModified` timestamps to `card.json`.
  - [ ] **Frontend:** Display dates in the `CardDetails` UI.
- [x] **Tagging System**
  - [x] Backend: Update card model to include `tags`.
  - [x] Backend: Implement `GET /api/tags` endpoint.
  - [x] Frontend: Add tag input component to the "Basic Info" tab.
- [x] **Search & Filtering (V1)**
  - [x] Backend: Enhance `GET /api/cards` to support `q` and `tags` query parameters.
  - [x] Frontend: Add search bar to `CardGallery`.
  - [x] Frontend: Add tag filter to `CardGallery`.
- [x] **User Experience**
  - [x] Implement Light/Dark mode toggle.

## Phase 3: Advanced Management – Power & Efficiency
- [ ] **Archival & Versioning System**
  - [ ] **Backend:** Implement `DELETE /api/cards/:id/archive` endpoint.
  - [ ] **Backend:** Modify `PUT` endpoint to save a copy of `card.json` to a `versions` sub-folder before editing.
  - [ ] **Frontend:** Create "Version History" tab.
  - [ ] **Frontend:** Implement "Preview" and "Revert" functionality in the version history.
- [ ] **Advanced Card Details & Tools**
  - [ ] **Frontend:** Implement "Character Book" tab.
  - [ ] **Frontend:** Implement "Advanced" tab for raw JSON view.
  - [ ] **Frontend:** Implement "Tool" tab for templates.
- [ ] **Enhanced Deletion Logic**
  - [ ] **Frontend:** Implement enhanced confirmation dialogs for deletion.
- [ ] **Advanced Filtering**
  - [ ] **Backend:** Enhance `GET /api/cards` for more filters (`hasLorebook`, `isFavorite`, `rating`, etc.).
  - [ ] **Frontend:** Create a dedicated "Filters" panel.
- [ ] **Favorites System**
  - [ ] Implement backend and frontend for the favorites system.
- [ ] **Bulk Actions**
  - [ ] Implement backend and frontend for bulk actions.

## Phase 4: Personalization, Data Integrity & Deployment
- [ ] **UI & UX Polish**
  - [ ] **Frontend:** Implement Char & Token Count on relevant text fields.
  - [ ] **Backend:** Create endpoints for gallery image uploads.
  - [ ] **Frontend:** Implement UI for card galleries and backgrounds.
- [ ] **Data Integrity**
  - [ ] **Backend:** Implement `GET /api/admin/backup` endpoint.
  - [ ] **Backend:** Implement `POST /api/admin/restore` endpoint.
  - [ ] **Frontend:** Create a "Settings" page for these actions.
- [ ] **Personalization**
  - [ ] Add `userNotes` field to the card model and UI.
  - [ ] Add `starRating` field to the card model and UI.
- [ ] **Security (Single-User)**
  - [ ] Backend: Implement password protection using JWT.
  - [ ] Frontend: Create a Login page.
- [ ] **Deployment**
  - [ ] Create comprehensive `README.md` documentation.